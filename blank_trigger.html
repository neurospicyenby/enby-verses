<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Existing head content -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Verses From a Self-Doubting Enby</title>
  <meta name="description" content="Poetry brought to you by Jayden">
  
  <!-- Open Graph Meta Tags for Social Media -->
  <!-- Existing meta tags -->
  
  <!-- Google Tag -->
  <!-- Existing Google Tag code -->
  
  <!-- Keep this script so we can manually open Tally form on demand. -->
  <script async src="https://tally.so/widgets/embed.js"></script>
  
  <!-- External Trigger Warning CSS (if needed on index page) -->
  <link rel="stylesheet" href="trigger-warning.css">
  
  <!-- Existing styles -->
  <style>
    /* Existing CSS code */
    
    /* Add the new Trigger Warning CSS here */
    
    /* ---------------------------------
       TRIGGER WARNING SECTION
    --------------------------------- */
    .trigger-warning-section {
      position: relative;
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      background-color: #FFE5E5; /* Light red background */
      border: 2px solid #FF0000; /* Red border */
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .warning-emoji {
      position: absolute;
      top: -25px; /* Adjust as needed */
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      background-color: #FF0000; /* Red background */
      color: #FFFFFF; /* White emoji */
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      animation: pulsate 2s infinite;
      cursor: pointer; /* Optional: if you want it clickable */
    }

    .trigger-warning-box p {
      margin: 0;
      font-size: 1rem;
      color: #333333;
    }

    /* Pulsate Animation */
    @keyframes pulsate {
      0% {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
      }
      50% {
        transform: translateX(-50%) scale(1.1);
        box-shadow: 0 0 10px 10px rgba(255, 0, 0, 0);
      }
      100% {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
      }
    }

    /* Responsive Adjustments */
    @media (max-width: 767px) {
      .trigger-warning-section {
        margin: 1rem;
        padding: 0.8rem;
      }

      .warning-emoji {
        top: -20px;
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
      }

      .trigger-warning-box p {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <!-- Existing header content -->
  </header>

  <section class="welcome-section">
    <!-- Existing welcome section -->
  </section>

  <main>
    <!-- Trigger Warning Section -->
    <section class="trigger-warning-section">
      <div class="warning-emoji" id="warningEmoji">‚ö†Ô∏è</div>
      <div class="trigger-warning-box">
        <p><strong>Trigger Warning:</strong> Some of the poems may contain sensitive topics related to mental health, heartbreak, and identity.</p>
      </div>
    </section>

    <!-- Original chronological poem list -->
    <div class="poem-list">
      <!-- Existing poem list code -->
    </div>

    <!-- THEME LISTS (auto-populated) -->
    <section class="theme-lists">
      <!-- Existing theme lists code -->
    </section>
  </main>

  <footer>
    <!-- Existing footer content -->
  </footer>

  <!-- FLOATING BUBBLE: triggers Tally popup -->
  <div class="floating-bubble" onclick="openTallyPopup()">üíå</div>

  <!-- KEY CONTAINER (PANEL + TAB) -->
  <div id="keyContainer" class="key-container">
    <!-- Existing key container code -->
  </div>

  <!-- Existing scripts -->
  <script>
    function openTallyPopup() {
      // Opens your Tally form in a popup by ID
      Tally.openPopup('wMva4E');
    }

    document.addEventListener("DOMContentLoaded", function() {
      // Existing DOMContentLoaded code
    });

    // Slide the Key panel in/out
    function toggleKeyPanel() {
      const container = document.getElementById('keyContainer');
      container.classList.toggle('show');
    }

    // Add the Trigger Warning Dismiss Functionality
    document.getElementById('warningEmoji').addEventListener('click', function() {
      const triggerWarning = document.querySelector('.trigger-warning-section');
      if (triggerWarning) {
        triggerWarning.style.display = 'none';
      }
    });
  </script>
</body>
</html>
